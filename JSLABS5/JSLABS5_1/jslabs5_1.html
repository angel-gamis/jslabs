<html>
	<head>
		<title>Astro in The Deep Dark</title>
	</head>
	<body style="background-color: blue;">
		<div id="titleBackground" style="display: flex; align-items: center; justify-content: center;">
			<img src="spaceBackground.jpg" style="width: 700px; height: 250px; position: absolute;">
		</div>
		<div id="titleText" style="display: flex; align-items: center; justify-content: center;">
			<img src="astro.gif" style="width: 275px; position: absolute; margin-top: 40px;">
			<img src="deepDark.gif" style="width: 300px; position: absolute; margin-top: 85px;">
		</div>

		<div id="screen" style="position: relative; top: 125px; margin: auto; width: 700px; height: 700px; background-color: black;">
			<canvas id="canvas" width="700px" height="700px">
				<img id="player" src="player.png" width="20px" style="position: absolute; top: 300px; left: 300px;">
				<img id="arrow" src="arrow.gif">
				<img id="press" src="press.gif">
				<img id="startBtn" src="start.gif">
				<img id="options" src="options.gif">
				<img id="credits" src="credits.gif">
			</canvas>
		</div>
		<img src="arrowKeys.png" width="150px" style="position: absolute; top: 850px; left: 350px;">
		<script>
			// ** Variables **
			const player = document.getElementById("player");
			let canvas = document.getElementById("canvas");
			let context = canvas.getContext("2d");
			let start = false;

			// Movement Variables
			let playerX = 330;
			let playerY = 570;
			let moveX = 7;
			let moveY = 7;
			let arrowX = 150;
			let arrowY = 500;
			let arrowMove = 50;

			// ** Checks Key Press ** 
			document.onkeydown = checkKeycode;
			document.onkeyup = checkKeycodeUp;

			let Keys = {
				left: false,
				right: false,
				up: false,
				down: false,
				space: false
			}

			window.onload = function(){
				//context.drawImage(player, playerX, playerY);
				context.drawImage(arrow, arrowX, arrowY);
			}

			function checkKeycode(e){
				let keycode = e.keyCode;
				e.preventDefault();

				if(keycode == 37 || keycode == 65){
					Keys.left = true; // left
				}
				if(keycode == 39 || keycode == 68){
					Keys.right = true; // Right
				}
				if(keycode == 38 || keycode == 87){
					Keys.up = true; // Up
				}

				if(keycode == 40 || keycode == 83){
					Keys.down = true; // Down
				}
				if(keycode == 32){
					Keys.space = true; // Space
				}

				// console.log("keycode: " + keycode);
				move();
				
			}

			function checkKeycodeUp(e){
				let keycode = e.keyCode;
				e.preventDefault();


				if(keycode == 37 || keycode == 65){
					Keys.left = false; // left
				}
				if(keycode == 39 || keycode == 68){
					Keys.right = false; // Right
				}
				if(keycode == 38 || keycode == 87){
					Keys.up = false; // Up
				}

				if(keycode == 40 || keycode == 83){
					Keys.down = false; // Down
				}
				if(keycode == 32){
					Keys.space = false; // Space
				}

				move();
			}

			function move(){

				if(start == true){
					// ** Player Movement **
					if(Keys.left == true){
						playerX -= moveX; // Left
					}
					if(Keys.right == true){
						playerX += moveX; // Right
					}
					if(Keys.up == true){
						playerY -= moveY; // Up
					}

					if(Keys.down == true){
						playerY += moveY; // Down
					}

					if(Keys.space == true){
						draw();
					}
				}
			}

			function startOptions(){
					if(Keys.up == true){
						arrowY -= arrowMove; // Up
					}

					if(Keys.down == true){
						arrowY += arrowMove; // Down
					}
			}

			function update(){
				context.clearRect(0,0, 700, 700);
				if(start == true){
					context.drawImage(player, playerX, playerY);
				}
				if(start == false){
					context.drawImage(arrow, arrowX, arrowY);
				}
			}

			setInterval(update, 50);

			if(start == false){
				startOptions();
			}

				
		</script>
	</body>
</html>